@model IEnumerable<TimetableSystem.Models.Module>

@{
    ViewBag.Title = "View Modules";
}

@using (Html.BeginForm("Index", "Module", new { name = "hiddenForm" }, FormMethod.Get))
{
<input type="hidden" id="moduleCode" name="moduleCode" />
<input type="hidden" id="moduleTitle" name="moduleTitle" />
<div class="buttons-wrapper bar">
    <div>
        <input type="submit" value="Activate filter" class="button" style="padding:5px;" />
    </div>
@*    <div>
        <input type="submit" value="Reset" class="button" style="padding:5px;" onclick="clear();" />
    </div>*@
    <div>
        @Html.ActionLink("Create new module", "Edit", new { }, new { @class = "button" })
    </div>
</div>
}

<script type="text/javascript">
    function filter() {
        document.getElementById('moduleCode').value = document.getElementById('codeInput').value;
        document.getElementById('moduleTitle').value = document.getElementById('titleInput').value;
    }
    function clear() {
        document.getElementById('moduleCode').value = "";
        document.getElementById('moduleTitle').value = "";
        filter();
    }
</script>

@*<h3>Total: @Model.Count()</h3>*@
@*<h2>Module Page</h2>*@

<!-- the new table -->
<fieldset style="width:800px;">
    <h2>Module code & title</h2>
    <div class="field" style="background-color:rgba(0,0,0,0.3);">
        <div class="editor-field" style="min-width:24%; max-width:24%; float:left;">
            <input class="filter" id="codeInput" name="codeInput" type="text" value placeholder="< Filter code >"
                onchange="filter();"
            />
         </div>
        <div class="editor-field" style="min-width:75%; max-width:75%; float:right;">
            <input id="titleInput" name="titleInput" type="text" class="filter" value placeholder="< Filter title >"
                onchange="filter();" 
            /> 
        </div>
    </div>
    @foreach (var item in Model)
    {
        <div class="field">
            <div class="editor-label">
                @Html.DisplayFor(modelItem => item.ModuleCode)
            </div>
            <div class="editor-field">
                <div class="editor-field-inner" style="float:left;">
                    @Html.DisplayFor(modelItem => item.ModuleTitle)
                </div>
                <div class="editor-field-inner" style="float:right;">
                    @Html.ActionLink("Edit", "Edit", new { code = item.ModuleCode }, new { @class = "button" }) 
                    @Html.ActionLink("Delete", "Delete", new { code = item.ModuleCode }, new { onclick = "return confirm('Are you sure you wish to delete this module?');", @class = "button" })
                </div>
            </div>
        </div>
    }
</fieldset>